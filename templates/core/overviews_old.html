{% extends 'academy_leads/academy_leads_base.html' %}
{%load static core_tags%}
{%block scripts%}
{{block.super}}
<script>
    $(document).ready(function() {
        initDataTable();
        document.body.addEventListener('htmx:beforeRequest', function(evt) {  
            if (![undefined, ''].includes(evt.detail.pathInfo.path) && ![undefined, ''].includes(evt.detail.target.id)){
                if (evt.detail.target.id == 'overview_table' || evt.detail.pathInfo.path.includes("academy-booking-overview")){
                    $("#overview_table").dataTable().fnDestroy();
                }
            }
        });
        document.body.addEventListener('htmx:afterSwap', function(evt) {  
            if (evt.detail.target.id == 'overview_table'){
                initDataTable(); 
            }
            else if (evt.detail.pathInfo.path.includes("modify-user")){
                $('#generic_modal').modal('hide');
                snackbarShow('Successfully modifed/added user', 'success')
            }            
            {% comment %} if (evt.detail.target.classList.contains('academy_booking_row')) {
                $('#refresh_overview_table').click(); 
            } {% endcomment %}
            
        });
    });
</script>
{%endblock scripts%}

{%block styles%}
    {{block.super}}
    <style>
    </style>
{%endblock styles%}
{%block content%}    
    <div class="">
        <div class="row">
            {%block extra_top_left_buttons %}
            {%include 'core/htmx/site_selection.html'%}
            {%endblock%}
            <div class="col">                
            </div>
            {%block extra_top_right_buttons %}
            {%endblock%}
        </div>
        <div class="row">
            <div class="col">
                {%block table%}
                
                {%endblock table%}
            </div>
        </div>
    </div>
    
{%endblock content%}