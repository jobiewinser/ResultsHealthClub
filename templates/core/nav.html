{%load static core_tags%}
<nav class="navbar navbar-expand-lg bg-{%if debug%}primary{%else%}dark{%endif%} navbar-dark" id="topnav">
        {% comment %} <a class="navbar-brand ps-2 top-nav-link" href="#" data-active-selector="#leads-top-nav-link" hx-indicator="#page_load_indicator" 
        hx-get="{%url 'customer-home'%}" hx-target="#content" hx-push-url="true" hx-swap="innerHTML">
            <img src="{% static 'img/logo-dark-back-img.png' %}" alt="winser systems logo" width="32" height="32">
        </a> {% endcomment %}
        <a class="navbar-brand p-0 pointer top-nav-link ps-2" hx-indicator="#page_load_indicator" data-active-selector="#leads-top-nav-link"
            hx-get="{%url 'customer-home'%}" hx-target="#content" hx-push-url="true" hx-swap="innerHTML">
            <img class="" src="{% static 'img/logo-dark-back-text.png' %}" height="32" alt="winser systems logo">
        </a>
        <button class="navbar-toggler btn-sm me-2" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse ps-2 pe-2" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-lg-0">
                {%if request.user.is_authenticated%}
                <li class="nav-item">
                    <a class="nav-link top-nav-link pointer nowrap {%if 'leads-and-calls' in request.path%}active{%endif%}" hx-indicator="#page_load_indicator" data-active-selector="#leads-top-nav-link" id="leads-top-nav-link"
                        hx-get="{%url 'campaign-leads-overview'%}?use_defaults=True" hx-target="#content" hx-push-url="true" hx-swap="innerHTML"><i class="fa-light fa-magnifying-glass"></i> Leads</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link top-nav-link pointer nowrap {%if 'booking-overview' in request.path%}active{%endif%}" hx-indicator="#page_load_indicator" data-active-selector="#bookings-top-nav-link" id="bookings-top-nav-link"
                        hx-get="{%url 'campaign-booking-overview'%}?use_defaults=True" hx-target="#content" hx-push-url="true" hx-swap="innerHTML"><i class="fa-light fa-table"></i> Bookings</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link top-nav-link pointer nowrap {%if 'analytics-overview' in request.path%}active{%endif%}" hx-indicator="#page_load_indicator" data-active-selector="#analytics-top-nav-link" id="analytics-top-nav-link"
                        hx-get="{%url 'analytics-overview'%}?use_defaults=True" hx-target="#content" hx-push-url="true" hx-swap="innerHTML"><i class="fa-light fa-chart-line-up"></i> Analytics</a>
                </li>
                {% comment %} <li class="nav-item">
                    <a class="nav-link top-nav-link pointer nowrap {%if 'messaging' in request.path%}active{%endif%}" hx-indicator="#page_load_indicator" data-active-selector="#messaging-top-nav-link" id="messaging-top-nav-link"
                        hx-get="{%url 'messaging'%}" hx-target="#content" hx-push-url="true" hx-swap="innerHTML"><i class="fa-light fa-chart-line-up"></i> Messaging</a>
                </li> {% endcomment %}

                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle {%if 'configuration/' in request.path%}active{%endif%}" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" id="configuration-top-nav-dropdown-toggle">
                        <i class="fa-light fa-gear"></i> Configuration
                    </a>
                    <ul class="dropdown-menu">
                    <li><a class="dropdown-item pointer top-nav-link" hx-indicator="#page_load_indicator" data-active-selector="#configuration-top-nav-dropdown-toggle" 
                        hx-get="{%url 'company-configuration'%}" hx-target="#content" hx-push-url="true" hx-swap="innerHTML">Company Configuration</a></li>
                    <li><a class="dropdown-item pointer top-nav-link" hx-indicator="#page_load_indicator" data-active-selector="#configuration-top-nav-dropdown-toggle"
                        hx-get="{%url 'site-configuration'%}" hx-target="#content" hx-push-url="true" hx-swap="innerHTML">Site Configuration</a></li>
                    <li><a class="dropdown-item pointer top-nav-link" hx-indicator="#page_load_indicator" data-active-selector="#configuration-top-nav-dropdown-toggle"
                        hx-get="{%url 'campaign-configuration'%}" hx-target="#content" hx-push-url="true" hx-swap="innerHTML">Campaign Configuration</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item pointer top-nav-link" hx-indicator="#page_load_indicator" data-active-selector="#configuration-top-nav-dropdown-toggle"
                        id="whatsapp_templates_link" hx-trigger="click"
                        hx-get="{%url 'whatsapp-templates'%}" hx-target="#content" hx-push-url="true" hx-swap="innerHTML">Whatsapp Templates</a></li>
                    </ul>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle {%if 'change-log' in request.path or 'feedback-forms' in request.path%}active{%endif%}" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" id="extra-top-nav-dropdown-toggle">
                        <i class="fa-solid fa-star"></i> Extra
                    </a>
                    <ul class="dropdown-menu">
                        <li>
                            <a class="dropdown-item pointer" 
                                hx-indicator=".top-htmx-indicator" hx-target="#generic_modal_body" 
                                hx-vals='{"template_name": "feedback_form"}'
                                hx-get="{% url 'campaign-lead-get-modal-content'%}" 
                                hx-push-url="false"
                                hx-swap="innerHTML" hx-trigger="click">
                                Feedback
                            </a>
                        </li> 
                        <li>
                            <a class="dropdown-item pointer top-nav-link" hx-indicator="#page_load_indicator" data-active-selector="#extra-top-nav-dropdown-toggle"
                            hx-get="{%url 'change-log'%}" hx-target="#content" hx-push-url="true" hx-swap="innerHTML"><b>v{{version}}</b> Change Log</a>
                        </li> 
                        {%if user.is_superuser%}       
                            <li>
                                <a class="dropdown-item pointer top-nav-link" hx-indicator="#page_load_indicator" data-active-selector="#extra-top-nav-dropdown-toggle"
                                    hx-get="{%url 'feedback-forms'%}" hx-target="#content" hx-push-url="true" hx-swap="innerHTML">Feedback Forms</a>
                            </li>   
                        {%endif%} 
                    </ul>
                </li>
                {%endif%}
                <li class="nav-item">
                    <img  class="top-htmx-indicator htmx-indicator invert" id="top-htmx-indicator" src="https://htmx.org/img/bars.svg"/>
                </li>            
            </ul>    
            {%include 'core/htmx/company-nav-section.html'%}
            {%include 'core/htmx/profile-nav-section.html'%}
        </div>
    
</nav>
        