{%load core_tags%}


<div class="row">
    <div class="col-3">
        <div class="" id="lead_to_bookings_chart_wrapper">
        </div>
    </div>
    <div class="col">
        <div class="row">
            <button hidden id="refresh_lead_to_bookings" hx-trigger="load, click delay:0.5s"
                hx-get="{%url 'get-leads-to-bookings' %}"
                hx-include="#leads_to_bookings_start_date, #leads_to_bookings_end_date, #site_pk, #graph_type_leads_to_booking"
                hx-target="#lead_to_bookings_chart_wrapper"
                hx-indicator="#htmx-indicator-leads-and-bookings"
                hx-swap="innerHTML"
                onclick="$('#htmx-indicator-leads-and-bookings').addClass('htmx-request')">refresh</button>
            <div class="col-md-auto right">
                <input id="leads_to_bookings_start_date" value="{{''|today_date_tag|add_years:-1|add_months:1|date_to_date_input_prefill}}" class="form-control form-control-sm" type="date" name="start_date"
                onchange="$('#refresh_lead_to_bookings').click()"/>
            </div>
            <div class="col-md-auto">
                <small>To</small>
            </div>
            <div class="col-md-auto left">
                <input id="leads_to_bookings_end_date" value="{{''|today_date_input_tag}}" class="form-control form-control-sm" type="date" name="end_date"
                onchange="$('#refresh_lead_to_bookings').click()"/>
            </div>
            
            <div class="col center">
                <img  class="htmx-indicator" id="htmx-indicator-leads-and-bookings" src="https://htmx.org/img/bars.svg"/>
            </div>

            <div class="col-md-auto right">
                <div class="row" style="margin-left:0px !important; min-width:300px;">
                    <div class="col" style="text-align:right">
                        <small>Line</small>
                    </div>
    
                    <div class="col-md-auto p-0">
                        <div class="form-check form-switch">
                            <input class="form-check-input" name="graph_type" checked type="checkbox" id="graph_type_leads_to_booking" onchange="$('#refresh_lead_to_bookings').click()">
                        </div>
                    </div>
    
                    <div class="col-md-auto" style="text-align:left; padding-left:5px">
                        <small>Bar</small>
                    </div>
                </div>
            </div>
        </div>
        <span id="lead_to_bookings_table_wrapper">            
        </span>
    </div>
</div>
